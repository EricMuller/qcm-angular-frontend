<app-filter-search-card *ngIf="showFilterCard" #matSearch [tagsSelected]="selectedTags"
                        (onClosed)="swapFilterCard()"></app-filter-search-card>


<mat-card *ngIf="totalElements && !showFilterCard">
  <mat-card-content>

    <mat-toolbar>

      <div>
        <button mat-icon-button *ngIf="modeSelection()" (click)="swapSelectedList()">
          <mat-icon *ngIf="showSelectedQuestionnaires" [color]="accent">list</mat-icon>
          <mat-icon *ngIf="!showSelectedQuestionnaires">list</mat-icon>
        </button>
        <span *ngIf="!modeSelection()" style="align-items: center ">My Questionnaire(s)</span>
      </div>

      <div class="check-margin">
        <span *ngIf="modeSelection()" style="align-items: center ">{{modeSelection()}} Questionnaires selected  </span>
        <!--<mat-checkbox mat-icon-button *ngIf="multiSelection() > 1" (change)="multiSelectionChecked($event)"-->
        <!--[checked]="pageSelection()"></mat-checkbox>-->
      </div>
      <div flex></div>
      <!--<button mat-icon-button matTooltip="More actions" [matMenuTriggerFor]="questionnaireMenu">-->
      <!--<mat-icon>more_vert</mat-icon>-->
      <!--</button>-->
      <!-- line menu -->
      <!--<mat-menu #questionnaireMenu="matMenu" yPosition="below">-->
      <!--<a *ngFor="let q of tagsSelected" >-->
      <!--<span class="label label-info">{{q.libelle}}</span>-->
      <!--</a>-->
      <button mat-icon-button (click)="multiSelect()">
        <mat-icon>select_all</mat-icon>
      </button>

      <a mat-icon-button [@tdPulse]="pulseState" (click)="refresh(true)">
        <mat-icon>replay</mat-icon>
      </a>
      <!--<a mat-icon-button (click)="openQuestionnaireDialog()">-->
      <!--<mat-icon>fiber_new</mat-icon>-->
      <!--</a>-->
      <!--<a mat-icon-button>-->
      <!--<mat-icon>delete</mat-icon>-->
      <!--</a>-->
      <mat-menu #filterMenu="matMenu">
        <!--<button mat-menu-item *ngFor="let q of tagsSelected">-->
        <!--<span class="label label-info">{{q.libelle}}-->
        <!--</span>-->
        <!--</button>-->
      </mat-menu>
      <!--<mat-icon matBadge="22" matBadgePosition="above after">home</mat-icon>-->
      <button mat-icon-button (click)="swapFilterCard()">
        <mat-icon matBadge="22" matBadgePosition="above after">filter_list</mat-icon>
      </button>
    </mat-toolbar>

    <app-questionnaire-nav-list [questionnaires]="questionnaires"
                                *ngIf="!showSelectedQuestionnaires"></app-questionnaire-nav-list>
    <app-questionnaire-nav-list [questionnaires]="questionnairesSelected"
                                *ngIf="showSelectedQuestionnaires"></app-questionnaire-nav-list>


    <mat-paginator #paginator *ngIf="  !showSelectedQuestionnaires  && (( questionnaires?.length == pageSize ) || last ) "
                   [length]="totalElements"
                   [pageSize]="pageSize" [showFirstLastButtons]="true"
                   (page)="onPaginateChange($event)"></mat-paginator>


    <button *ngIf="modeSelection() < 2" mat-fab color="primary" class="mat-fab-bottom-right z-2 fixed"
            (click)="createQuestionnaire($event)">
      <mat-icon>add</mat-icon>
    </button>

    <app-fab mat-fab *ngIf="modeSelection() > 1">
      <app-fab-toggle [iconOff]="'mode_edit'" [iconOn]="'replay'"></app-fab-toggle>
      <app-fab-button [color]="'accent'" [icon]="'delete'" (onClick)="deleteSelectedQuestionnaires()"></app-fab-button>
    </app-fab>

  </mat-card-content>
</mat-card>


<mat-card class="empty" *ngIf="(questionnaires )?.length ==0 ">
  <mat-card-content class="empty">
    <div style="display:flex;justify-content: center;flex-direction: column;align-items: center;height: 100%;">
      <div><img src="./assets/images/norecord.png"/></div>
      <p>You don't have any Questionnaires.</p>
      <button mat-raised-button color="primary" (click)="createQuestionnaire($event)">ADD A QUESTIONNAIRE</button>
    </div>
  </mat-card-content>
</mat-card>



