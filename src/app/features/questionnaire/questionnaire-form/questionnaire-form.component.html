<div class="page-center" fxLayout='column'>

  <mat-toolbar>

    <mat-toolbar-row>

      <a mat-icon-button [routerLink]="['/questionnaires/list']">
        <mat-icon>arrow_back</mat-icon>
      </a>

      <div *ngIf="questionnaire.id && !edition">{{'qcm.questionnaire.view.title' | translate}}{{questionnaire.id}}</div>
      <div
        *ngIf="questionnaire.id && edition">{{'qcm.questionnaire.edit.title' | translate}}  {{questionnaire.id}}</div>
      <div *ngIf="!questionnaire.id">{{'qcm.questionnaire.create.title' | translate}}</div>

      <div class="spacer"></div>

      <button mat-icon-button (click)="toggleEdition(true)" [hidden]="edition"
              matTooltip="{{'qcm.form.toggle.on' | translate }}" color="primary">
        <mat-icon>create</mat-icon>
      </button>

      <button mat-icon-button (click)="saveForm()" [hidden]="!edition"
              matTooltip="{{'qcm.form.menu.save' | translate }}" color="primary">
        <mat-icon>save</mat-icon>
      </button>

      <button mat-icon-button (click)="deleteForm()" [hidden]="edition"
              matTooltip="{{'qcm.form.menu.deleteAll' | translate }}" color="accent">
        <mat-icon>delete</mat-icon>
      </button>

      <!--<ng-content select="[menu-buttons]"></ng-content>-->
      <button mat-icon-button matTooltip="More actions" [matMenuTriggerFor]="questionnaireMenu">
        <mat-icon>more_vert</mat-icon>
      </button>
      <!-- line menu -->
      <mat-menu #questionnaireMenu="matMenu" yPosition="below">
        <!--<ng-content select="[menu-items]"></ng-content>-->
        <button mat-menu-item (click)="createCategory()">
          <mat-icon>add</mat-icon>
          {{'qcm.questionnaire.menu.category.create' |translate}}
        </button>
        <button mat-menu-item (click)="viewQuestionsByQuestionnaire()">
          <mat-icon>list</mat-icon>
          {{'qcm.questionnaire.menu.questions.list' |translate}}
        </button>
      </mat-menu>
    </mat-toolbar-row>

  </mat-toolbar>

  <!--form -->
  <div class="form" fxLayout="column" fxLayout.gt-sm="row">

    <form class="example-form" [formGroup]="form" fxLayout="column" fxLayout.gt-sm="row" fxFlex="100%">

      <div fxLayout='column' fxFlex="100%" fxFlex.gt-sm="50%">


        <!--        <div> &lt;!&ndash; style="display:flex;flex-direction: column" &ndash;&gt; -->
        <mat-form-field class="example-full-width">
          <input formControlName="title" placeholder="{{'qcm.questionnaire.form.input.title.placeholder' |translate}}"
                 matInput>
        </mat-form-field>


        <mat-form-field *ngIf="categories as epics;">
          <mat-select formControlName="category"
                      placeholder="{{'qcm.questionnaire.form.input.category.placeholder' |translate}}"
                      [compareWith]="compareById">
            <mat-option>--</mat-option>
            <mat-option *ngFor="let epic of epics" [value]="epic">{{epic.libelle}}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="chip-tags">
          <mat-chip-list #chipList>
            <mat-chip *ngFor="let tag of tags.controls; index as i" [selectable]="edition"
                      [removable]="edition" (remove)="removeChip(i)">
              {{tag.get('libelle')?.value}}
              <mat-icon matChipRemove *ngIf="edition">cancel</mat-icon>
            </mat-chip>
            <input placeholder="{{'qcm.questionnaire.form.input.tag.placeholder' |translate}}"
                   [matChipInputFor]="chipList"
                   [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                   [matChipInputAddOnBlur]="addOnBlur"
                   (matChipInputTokenEnd)="addChip($event)" [disabled]="!edition"/>
          </mat-chip-list>
        </mat-form-field>

        <mat-form-field class="example-full-width">
          <input formControlName="website" placeholder="{{'qcm.questionnaire.form.input.website.placeholder' |translate}}"
                 matInput>
        </mat-form-field>

      </div>

      <!--<pre>{{form.value | json}}</pre>-->

      <!--      </div>-->

      <div fxLayout='column' fxFlex="100%" fxFlex.gt-sm="50%" >

        <mat-form-field style="padding: 10px">

          <textarea id="textbox" formControlName="description" fxFlex="100%"
                    placeholder="{{'qcm.questionnaire.form.input.description.placeholder' |translate}}"
                    matInput cols="50" rows="15"></textarea>

        </mat-form-field>
      </div>


    </form>

  </div>
</div>

